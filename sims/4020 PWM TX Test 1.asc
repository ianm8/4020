Version 4
SHEET 1 1268 1668
WIRE -448 192 -480 192
WIRE -160 192 -192 192
WIRE 320 192 288 192
WIRE -480 224 -480 192
WIRE -192 224 -192 192
WIRE 288 224 288 192
WIRE -480 320 -480 304
WIRE -192 320 -192 304
WIRE 288 320 288 304
WIRE -64 448 -480 448
WIRE -480 496 -480 448
WIRE -480 592 -480 576
WIRE 16 608 -112 608
WIRE -64 640 -64 448
WIRE -112 656 -112 608
WIRE -96 656 -112 656
WIRE 16 672 16 608
WIRE 16 672 -32 672
WIRE 32 672 16 672
WIRE 128 672 112 672
WIRE 208 672 128 672
WIRE -304 688 -480 688
WIRE -192 688 -224 688
WIRE -96 688 -192 688
WIRE -192 720 -192 688
WIRE 128 720 128 672
WIRE -192 816 -192 784
WIRE -64 816 -64 704
WIRE 128 816 128 784
WIRE -48 928 -464 928
WIRE -464 976 -464 928
WIRE -464 1072 -464 1056
WIRE 32 1088 -96 1088
WIRE -48 1120 -48 928
WIRE -96 1136 -96 1088
WIRE -80 1136 -96 1136
WIRE 32 1152 32 1088
WIRE 32 1152 -16 1152
WIRE 48 1152 32 1152
WIRE 144 1152 128 1152
WIRE 224 1152 144 1152
WIRE -288 1168 -480 1168
WIRE -176 1168 -208 1168
WIRE -80 1168 -176 1168
WIRE -480 1200 -480 1168
WIRE -176 1200 -176 1168
WIRE 144 1200 144 1152
WIRE -480 1312 -480 1280
WIRE -176 1312 -176 1264
WIRE -48 1312 -48 1184
WIRE 144 1312 144 1264
FLAG -480 320 0
FLAG -448 192 SIG
IOPIN -448 192 Out
FLAG -192 320 0
FLAG -160 192 RAMP
IOPIN -160 192 Out
FLAG 288 320 0
FLAG 320 192 PWM
IOPIN 320 192 Out
FLAG -480 688 PWM
IOPIN -480 688 In
FLAG -192 816 0
FLAG 224 1152 TP_OUT_BODE
IOPIN 224 1152 Out
FLAG -480 1312 0
FLAG -480 592 0
FLAG -64 816 0
FLAG 128 816 0
FLAG 208 672 TP_OUT_PWM
IOPIN 208 672 Out
FLAG -176 1312 0
FLAG -464 1072 0
FLAG -48 1312 0
FLAG 144 1312 0
SYMBOL voltage -480 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value SINE(1.6 1 1000)
SYMBOL voltage -192 208 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 3.3 0 500n 5n 0 4.5u)
SYMBOL bv 288 208 R0
SYMATTR InstName B1
SYMATTR Value V=if(V(SIG)>V(RAMP),3.3,0)
SYMBOL res -208 672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL cap -208 720 R0
SYMATTR InstName C9
SYMATTR Value 47n
SYMBOL voltage -480 1184 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value ""
SYMBOL Opamps\\AD8602 -64 608 R0
SYMATTR InstName U1
SYMBOL voltage -480 480 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL res 16 688 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL cap 112 720 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res -192 1152 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL cap -192 1200 R0
SYMATTR InstName C2
SYMATTR Value 47n
SYMBOL Opamps\\AD8602 -48 1088 R0
SYMATTR InstName U2
SYMBOL voltage -464 960 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V5
SYMATTR Value 5
SYMBOL res 32 1168 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 100
SYMBOL cap 128 1200 R0
SYMATTR InstName C3
SYMATTR Value 100n
TEXT -576 96 Left 2 !.tran 0 26m 1m 1n
TEXT -576 136 Left 2 ;.ac oct 10000 10 10000k
