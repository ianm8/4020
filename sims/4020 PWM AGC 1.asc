Version 4
SHEET 1 888 680
WIRE -416 -512 -448 -512
WIRE -128 -512 -160 -512
WIRE 352 -512 320 -512
WIRE -448 -480 -448 -512
WIRE -160 -480 -160 -512
WIRE 320 -480 320 -512
WIRE -448 -384 -448 -400
WIRE -160 -384 -160 -400
WIRE 320 -384 320 -400
WIRE -512 32 -544 32
WIRE -400 32 -432 32
WIRE -224 32 -400 32
WIRE -176 32 -224 32
WIRE -400 64 -400 32
WIRE -176 64 -176 32
WIRE 432 64 176 64
WIRE 544 64 512 64
WIRE 720 64 544 64
WIRE 768 64 720 64
WIRE 176 96 176 64
WIRE 544 96 544 64
WIRE 768 96 768 64
WIRE 176 192 176 176
WIRE -400 208 -400 128
WIRE -176 208 -176 144
WIRE 768 240 768 176
WIRE 544 272 544 160
FLAG -176 208 0
FLAG -224 32 TP_OUT
FLAG -448 -384 0
FLAG -416 -512 AGC
IOPIN -416 -512 Out
FLAG -160 -384 0
FLAG -128 -512 RAMP
IOPIN -128 -512 Out
FLAG 320 -384 0
FLAG 352 -512 PWM
IOPIN 352 -512 Out
FLAG -544 32 PWM
IOPIN -544 32 In
FLAG -400 208 0
FLAG 768 240 0
FLAG 720 64 TP_OUT_2
FLAG 544 272 0
FLAG 176 192 0
SYMBOL res -192 48 R0
SYMATTR InstName R5
SYMATTR Value 100k
SYMBOL voltage -448 -496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 3.2
SYMBOL voltage -160 -496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value PULSE(0 3.3 0 1.9u 0.1u 0 2u)
SYMBOL bv 320 -496 R0
SYMATTR InstName B1
SYMATTR Value V=if(V(AGC)>V(RAMP),3.3,0)
SYMBOL res -416 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL cap -416 64 R0
SYMATTR InstName C6
SYMATTR Value 1µ
SYMBOL res 752 80 R0
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 528 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL cap 528 96 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL voltage 176 80 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 3.3 10m 0 0 1s 2s)
TEXT -448 -336 Left 2 !.tran 0 10s 1m
TEXT -448 -312 Left 2 ;.ac oct 10000 10 10000k
